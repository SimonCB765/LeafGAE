<html>
	<head>
		<title>Leaf Protein Culling Server</title>
		<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/main.css') }}">
		<script type="text/javascript" src="{{ url_for('static', filename='scripts/culling.js') }}"></script>
	</head>
	<body>
		<br>
		<div id="navigation" align="center">
			<b><a href="{{ url_for('home') }}">Home</a></b>
			<hr>
			<b><a href="{{ url_for('culling') }}">Culling</a></b>
			<hr>
			<b><a href="{{ url_for('downloads') }}">Pre-Culled Lists</a></b>
			<hr>
			<b><a href="{{ url_for('contacts') }}">Contact Information</a></b>
		</div>

		<div id="content" style="text-align: center;">
			{% with errorMessage = get_flashed_messages() %}
				<div id="error">
					<p align="center"><b>There were errors in your input. The incorrect fields are highlighted in red.<b></p>
					<ul align="center">
						{% for error in errorMessage %}
							<li align="center">{{ error }}</li>
						{% endfor %}
					</ul>
				</div>
			{% endwith %}

			<form id="cullform" enctype="multipart/form-data" action="{{ url_for('culling') }}" method="post" onsubmit="return validateForm(this)">
				<h2>Select Chains and Entries to Cull</h2>
				<div id="wholeInfoBox" style="float: right; width: 25%; text-align: center; font-size: 17px; border: #FFFFFF 1px solid; background-color: #FFFFFF; visibility: hidden;">
					Selecting to cull the whole PDB disables culling by chains/entries and by organism.
				</div>
				<div style="float: right; width: 50%; text-align: center; font-size: 17px;">
					<br>
					<b>Cull the whole PDB?</b>
					{% if wholePDB %}
						<input type="radio" name="wholePDB" value="yes"
							   onclick="disableElement(document.getElementById('pastedInfo'));
										disableElement(document.getElementById('speciesTextBox'));
							            showElement(document.getElementById('wholeInfoBox'));"
							   checked="checked"/>Yes
						<input type="radio" name="wholePDB" value="no"
							   onclick="enableElement(document.getElementById('pastedInfo'));
										enableElement(document.getElementById('speciesTextBox'));
										hideElement(document.getElementById('wholeInfoBox'));"/>No
					{% else %}
						<input type="radio" name="wholePDB" value="yes"
							   onclick="disableElement(document.getElementById('pastedInfo'));
										disableElement(document.getElementById('speciesTextBox'));
										showElement(document.getElementById('wholeInfoBox'));"/>Yes
						<input type="radio" name="wholePDB" value="no"
							   onclick="enableElement(document.getElementById('pastedInfo'));
										enableElement(document.getElementById('speciesTextBox'));
										hideElement(document.getElementById('wholeInfoBox'));" checked="checked"/>No
					{% endif %}
				</div>
				<div style="clear: both;">
					<b>Please paste or type your Chains/Entries in plain text format in the box below:</b>
				</div>
				<br>
				<div id="pastedInfoBox" style="float: right; width: 25%; text-align: center; font-size: 17px; border: #FFFFFF 1px solid; background-color: #FFFFFF; visibility: hidden;">
					Information about what to enter in this text box.
				</div>
				<div style="float: right; width: 50%; text-align: center; font-size: 17px;">
					<textarea id="pastedInfo" name="pastedInfo" rows="10" cols="50" maxlength="200000"
							  onfocus="showElement(document.getElementById('pastedInfoBox'))"
							  onblur="hideElement(document.getElementById('pastedInfoBox'))"
							  style="border:3px solid #F7730E;">{{ pastedChains }}</textarea>
				</div>

				<div style="clear: both;">
					<br>
					<b>Or enter an organism of your choosing:</b>
					<br>
				</div>
				<div id="organismInfoBox" style="float: right; width: 25%; text-align: center; font-size: 17px; border: #FFFFFF 1px solid; background-color: #FFFFFF; visibility: hidden;">
					Enter the name of an organism (case insensitive) as it appears in the PDB.
				</div>
				<div style="float: right; width: 50%; text-align: center; font-size: 17px;">
					<br>
					{% if speciesTextBox %}
						<input id="speciesTextBox" type="text" name="speciesTextBox" value={{ speciesTextBox }} size="50"
							   onfocus="showElement(document.getElementById('organismInfoBox'))"
							   onblur="hideElement(document.getElementById('organismInfoBox'))"
							   style="border:3px solid #F7730E;"/>
					{% else %}
						<input id="speciesTextBox" type="text" name="speciesTextBox" value="" size="50"
							   onfocus="showElement(document.getElementById('organismInfoBox'))"
							   onblur="hideElement(document.getElementById('organismInfoBox'))"
							   style="border:3px solid #F7730E;"/>
					{% endif %}
				</div>
				<div style="clear: both;">
					<br><hr>
				</div>
				<h2 align="center">Select Sequence Properties</h2>
				<table align='center' border="0" cellpadding="0">
					<tr>
						<td><b>Percentage Sequence Identity:</b></td>
						<td colspan="2">
							<input type="text" id="pc" name="pc" value={{ pc }} size="10"/>
						</td>
						<td id="SeqIdenInfo" style="color:#000000; border: #FFFFFF 1px solid;">Valid values are 5-100 inclusive.</td>
					</tr>
					<tr>
						<td><b>Minimum Resolution:</b></td>
						<td colspan="2">
							<input type="text" id="minRes" name="minRes" value={{ minRes }} size="10"/>
						</td>
						<td id="minResInfo" style="color:#000000; border: #FFFFFF 1px solid;">Must be 0 or greater, and less than max resolution.</td>
					</tr>
					<tr>
						<td><b>Maximum Resolution:</b></td>
						<td colspan="2">
							<input type="text" id="maxRes" name="maxRes" value={{ maxRes }} size="10"/>
						</td>
						<td id="maxResInfo" style="color:#000000; border: #FFFFFF 1px solid;">Must be greater than min resolution, and no more than 100.</td>
					</tr>
					<tr>
						<td><b>Maximum R Value:</b></td>
						<td colspan="2">
							<input type="text" id="maxRVal" name="maxRVal" value={{ maxRVal }} size="10"/>
						</td>
						<td id="RValInfo" style="color:#000000; border: #FFFFFF 1px solid;">Valid values are 0-1 inclusive.</td>
					</tr>
					<tr>
						<td><b>Enforce Minimum Chain Length?</b></td>
						<td>
							{% if enforceMinLength %}
								<input type="radio" id="enforceMinLengthNo" name="enforceMinLength" value="no" onclick="disableElement(document.getElementById('minLen'));"/>No
								<input type="radio" id="enforceMinLengthYes" name="enforceMinLength" value="yes" onclick="enableElement(document.getElementById('minLen'));" checked="checked"/>Yes
							{% else %}
								<input type="radio" id="enforceMinLengthNo" name="enforceMinLength" value="no" onclick="disableElement(document.getElementById('minLen'));" checked="checked"/>No
								<input type="radio" id="enforceMinLengthYes" name="enforceMinLength" value="yes" onclick="enableElement(document.getElementById('minLen'));"/>Yes
							{% endif %}
						</td>
						<td>
							<input id="minLen" type="text" name="minLen" value={{ minLen }} size="10" disabled style="background-color: #222222;"/>
						</td>
						<td id="minLengthInfo" style="color:#000000; border: #FFFFFF 1px solid;">Must be greater than 0, and less than max length.</td>
					</tr>
					<tr>
						<td><b>Enforce Maximum Chain Length?</b></td>
						<td>
							{% if enforceMaxLength %}
								<input type="radio" id="enforceMaxLengthNo" name="enforceMaxLength" value="no" onclick="disableElement(document.getElementById('maxLen'));"/>No
								<input type="radio" id="enforceMaxLengthYes" name="enforceMaxLength" value="yes" onclick="enableElement(document.getElementById('maxLen'));" checked="checked"/>Yes
							{% else %}
								<input type="radio" id="enforceMaxLengthNo" name="enforceMaxLength" value="no" onclick="disableElement(document.getElementById('maxLen'));" checked="checked"/>No
								<input type="radio" id="enforceMaxLengthYes" name="enforceMaxLength" value="yes" onclick="enableElement(document.getElementById('maxLen'));"/>Yes
							{% endif %}
						</td>
						<td>
							<input id="maxLen" type="text" name="maxLen" value={{ maxLen }} size="10" disabled style="background-color: #222222;"/>
						</td>
						<td id="maxLengthInfo" style="color:#000000; border: #FFFFFF 1px solid;">Must be greater than 0, and more than min length.</td>
					</tr>
					<tr>
						<td><b>Include non-X-ray entries?</b></td>
						<td>
							{% if includeNonXray %}
								<input type="radio" name="includeNonXray" value="no"/>No
								<input type="radio" name="includeNonXray" value="yes" checked="checked"/>Yes
							{% else %}
								<input type="radio" name="includeNonXray" value="no" checked="checked"/>No
								<input type="radio" name="includeNonXray" value="yes"/>Yes
							{% endif %}
						</td>
					</tr>
					<tr>
						<td><b>Skip entries with only alpha carbons?</b></td>
						<td>
							{% if includeAlphaCarbon %}
								<input type="radio" name="includeAlphaCarbon" value="no"/>No
								<input type="radio" name="includeAlphaCarbon" value="yes" checked="checked"/>Yes
							{% else %}
								<input type="radio" name="includeAlphaCarbon" value="no" checked="checked"/>No
								<input type="radio" name="includeAlphaCarbon" value="yes"/>Yes
							{% endif %}
						</td>
					</tr>
				</table>
				<br><hr>
				<h2 align="center">Cull By Entry Parameters</h2>
				<table align='center' border="0" cellpadding="0">
					<tr>
						<td><b>Cull by entry?</b></td>
						<td colspan="2">
							{% if cullByEntry %}
								<input type="radio" id="cullByEntryNo" name="cullByEntry" value="chain"
									   onclick="disableElement(document.getElementById('intraEntryPC'));"/>No
								<input type="radio" id="cullByEntryYes" name="cullByEntry" value="entry"
									   onclick="if (document.getElementById('intraEntryCullYes').checked) {enableElement(document.getElementById('intraEntryPC'));}"
									   checked="checked"/>Yes
							{% else %}
								<input type="radio" id="cullByEntryNo" name="cullMethod" value="chain"
									   onclick="disableElement(document.getElementById('intraEntryPC'));"
									   checked="checked"/>No
								<input type="radio" id="cullByEntryYes" name="cullMethod" value="entry"
									   onclick="if (document.getElementById('intraEntryCullYes').checked) {enableElement(document.getElementById('intraEntryPC'));}"
									   />Yes
							{% endif %}
						</td>
					</tr>
					<tr>
						<td><b>Cull chains within entries?</b></td>
						<td>
							{% if intraEntryCull %}
								<input type="radio" id="intraEntryCullNo" name="intraEntryCull" value="no"
									   onclick="disableElement(document.getElementById('intraEntryPC'));"/>No
								<input type="radio" id="intraEntryCullYes" name="intraEntryCull" value="yes"
									   onclick="if (document.getElementById('cullByEntryYes').checked) {enableElement(document.getElementById('intraEntryPC'));}"
									   checked="checked"/>Yes
							{% else %}
								<input type="radio" id="intraEntryCullNo" name="intraEntryCull" value="no"
									   onclick="disableElement(document.getElementById('intraEntryPC'));"
									   checked="checked"/>No
								<input type="radio" id="intraEntryCullYes" name="intraEntryCull" value="yes"
									   onclick="if (document.getElementById('cullByEntryYes').checked) {enableElement(document.getElementById('intraEntryPC'));}"
									   />Yes
							{% endif %}
						</td>
					</tr>
					<tr>
						<td><b>Within entry percentage sequence identity:</b></td>
						<td>
							<input type="text" id="intraEntryPC" name="intraEntryPC" value={{ intraEntryPC }} size="10" disabled style="background-color: #222222;"/>
						</td>
						<td id="intraEntryInfo" style="color:#000000; border: #FFFFFF 1px solid;">Valid values are 5-100 inclusive.</td>
					</tr>
				</table>
				<br><hr>
				<p align="center">
					<input type="submit" value="Submit Form"/>
				</p>
			</form>
		</div>

		<div id="footer"><p>Last updated <!-- #BeginDate format:Am1 -->January 14, 2014<!-- #EndDate -->.</p></div>
	</body>
</html>